---
title: Autogen入門ハンズオン＋学習が楽しくなる方法と振る舞いの考察
tags:
  - 失敗談
  - 考察
  - ハンズオン
  - イベントレポート
  - AutoGen
private: false
updated_at: '2024-11-15T20:37:03+09:00'
id: 29064ef54ddb68b71dac
organization_url_name: null
slide: false
ignorePublish: false
---

## 本日のイベント・勉強会
https://hannari-python.connpass.com/event/331175/

ハンズオンパートでも自分の意見を言いたい参加者が複数名いて収拾がつかなかったので、ハンズオン資料を読みながらやりながら、私が感じた話だけを書き連ねていきます。

なお、資料は公開されています。

https://github.com/hideyuki-ogawa/autogen-hands-on/blob/main/autogen_pt2.ipynb

OpenAI APIキーは事前に取得しておきましょう。

### アンケートがなかったので、勝手にアンケート
:::note
AutoGenに触れてみよう、と思ったのは本セミナーのおかげなので感謝しています
:::

:::note warn
コミュニティに興味を持った場合、常連の方？のクセが強く、ハンズオンパートは説明を聞けないものと思った方がいいかもしれません。が、せっかくAIの勉強会なので、AIに解説してもらってある程度予習というか、インプットを入れてから本イベントに参加するべきなのかもしれません。
:::

### Gensparkの検索じゃない版？
私の認識というか理解の仕方が合っているか微妙なところですが、複数のエージェントを立てて一つの目標に向かっていく、ということがやりたいことなんだろうなぁ、という印象を持ちました。
検索チックな使い方を想定するとGensparkが分かりやすいので例示したんですが、おそらく似たようなイメージで生成AIに何か生成結果を出させるという事なんだろうという理解です。

### TRPGをやらせる
本格的なシステムを使うと学習がきついので、死亡フラグTRPGをやらせてみました。

- コード：プレイヤーエージェントを3人以上作る
- システムメッセージ：全パターンの死亡フラグのセリフを覚える
- システムメッセージ：（長いので後述）
- ユーザーインプット：演目を決める

ルール説明がえぐい！
雑に「死亡フラグTRPGをやろう」ではルールもへったくれもないのでシステムメッセージで全部書き出したが、これでも精度がびみょい。

参考例

https://www.perplexity.ai/search/si-wang-hurakutrpgtohananika-r-ZpETbn.ASMSFpBtgnI_5NA

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/122800/46100f65-a9b7-6adc-96d2-fe3885d24c80.png)

こんなんじゃ何をすればいいかわかるはずもないので、頑張って言語化する

```
死亡フラグにセリフについて各自学習してもらう（期待としては、異なる題材から死亡フラグを学んで、それぞれの見解が異なっていて欲しい。シード値を変える？）

- システムメッセージ：（読みやすいように改行しているが、実際は一行）

これからあなたの死亡フラグとなるセリフを渡す。
その後与えられたトークテーマに沿って議論をする。
あなたの目的は渡された死亡フラグのセリフを会話に組み込んで、他のプレイヤーからの死亡判定の賛同を得る事である。
死亡判定とは、物理的に命を落とす事を指すが、逮捕されるなど社会的に死ぬなど生存する上で致命的な障害が伴う事も含むことができる。各プレイヤーの倫理観が絶対であり、抗議は認めない。
このとき、自分を除く過半数の合意が得られればあなたは勝利する。
ただし、他のプレイヤーからの賛同が得られない場合、今使った死亡フラグのセリフを破棄し、新たに死亡フラグのセリフを決定する。
その後同様に与えられたトークテーマに沿って議論をしていく。
これを繰り返し、誰かが勝利となった時点でゲームを終了する。
ここまでを１セットと呼ぶ。

１セットが終了したら、人間の評価により死亡フラグの判定が正しかったかを判定し、承認されればあなたにゲームポイントが１点付与される。承認されなければ、今回のようなケースでは死亡フラグと判定されない事を学習する。
人間がゲームを終了するまで繰り返し、最終的に多くのゲームポイントを持っているプレイヤーが勝者となる。
```

説明だけではよくわからないと思うので、分かりやすいところだけを置いておきます。（私のお気に入りとも）

https://youtu.be/8O233kpTxDE?si=4tmNGkuVTc54Wybp&t=1000

こういうことをやってほしい。

### 結論からいうと、うまくいかない
反省点を書くと、そもそも死亡フラグTRPGがマイナーすぎたのかも
将棋や囲碁ではお互いに最善手を指し（打ち）続けた場合、先手必勝の手筋が割と研究され尽くしているので、ある程度ランダムの要素を入れて麻雀にする。
プレイヤー４人とゲームマスター１人を立て、ゲームマスターは各プレイヤーの持ち点や河や山、曲目などプレイヤーが操作する以外の全てを管理し、ゲームを進行させる。

このようにした上で、たとえば特定のプレイヤーは安手早上がりを狙ったり、大きな手作りを好んだりと特色を与える方法がよさそう
今日はもう心が折れたのでやらないが、こういったシミュレーションをさせるとAutogenの面白さに気付きやすいかもしれない、という提案だけ残しておきます。
ただし、ゲームの終了条件などに人間が介在する余地を残しておかないとどのタイミングで評価すればいいか、我々も分からないため「麻雀のルールやアガリ、待ち読みも符計算は知っているけどこの卓のレギュレーションは知らない一見の客か友人」を想定してメッセージを細かくルール説明的に書くのがよさそう。
